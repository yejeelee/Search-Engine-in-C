<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>A8: Indexing: MovieIndex.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">A8: Indexing
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MovieIndex.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &quot;<a class="el" href="_movie_index_8h_source.html">MovieIndex.h</a>&quot;</code><br />
<code>#include &quot;htll/LinkedList.h&quot;</code><br />
<code>#include &quot;htll/Hashtable.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_movie_8h_source.html">Movie.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_movie_set_8h_source.html">MovieSet.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for MovieIndex.c:</div>
<div class="dyncontent">
<div class="center"><img src="_movie_index_8c__incl.png" border="0" usemap="#_movie_index_8c" alt=""/></div>
<map name="_movie_index_8c" id="_movie_index_8c">
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aed819996319a92b1fff299a664654bdb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_movie_index_8c.html#aed819996319a92b1fff299a664654bdb">DestroyMovieSetWrapper</a> (void *movie_set)</td></tr>
<tr class="separator:aed819996319a92b1fff299a664654bdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a675879515a8f5ab251c275e4cfaeb9d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_movie_index_8c.html#a675879515a8f5ab251c275e4cfaeb9d6">toLower</a> (char *str, int len)</td></tr>
<tr class="separator:a675879515a8f5ab251c275e4cfaeb9d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aabf14cd8809083c6084a6220487a8f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_movie_index_8c.html#a5aabf14cd8809083c6084a6220487a8f">AddMovieTitleToIndex</a> (<a class="el" href="_movie_index_8h.html#a02f569684caa17e45531c85d80387b68">Index</a> index, <a class="el" href="_movie_8h.html#a6f5eab8e6c6f61358bdf8722920c3e24">Movie</a> *<a class="el" href="structmovie.html">movie</a>, uint64_t doc_id, int row_id)</td></tr>
<tr class="separator:a5aabf14cd8809083c6084a6220487a8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc37901ef1ea26ad29447880d3c0268f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_movie_index_8c.html#acc37901ef1ea26ad29447880d3c0268f">AddMovieToIndex</a> (<a class="el" href="_movie_index_8h.html#a02f569684caa17e45531c85d80387b68">Index</a> index, <a class="el" href="_movie_8h.html#a6f5eab8e6c6f61358bdf8722920c3e24">Movie</a> *<a class="el" href="structmovie.html">movie</a>, enum <a class="el" href="_movie_8h.html#af14e8439d4902c753ec446ee28f66a25">IndexField</a> field)</td></tr>
<tr class="separator:acc37901ef1ea26ad29447880d3c0268f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48f7f04f4093f138800055915d7a11f7"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_movie_index_8c.html#a48f7f04f4093f138800055915d7a11f7">ComputeKey</a> (<a class="el" href="_movie_8h.html#a6f5eab8e6c6f61358bdf8722920c3e24">Movie</a> *<a class="el" href="structmovie.html">movie</a>, enum <a class="el" href="_movie_8h.html#af14e8439d4902c753ec446ee28f66a25">IndexField</a> which_field)</td></tr>
<tr class="separator:a48f7f04f4093f138800055915d7a11f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a6dc77741a7bd254ce1f3b76a527f4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_movie_set_8h.html#ac804470e62a37f295817f4964b4cf666">MovieSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_movie_index_8c.html#a4a6dc77741a7bd254ce1f3b76a527f4d">GetMovieSet</a> (<a class="el" href="_movie_index_8h.html#a02f569684caa17e45531c85d80387b68">Index</a> index, const char *term)</td></tr>
<tr class="separator:a4a6dc77741a7bd254ce1f3b76a527f4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ee61f9e528ad88ccae9a9f0bfe84828"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_movie_index_8c.html#a8ee61f9e528ad88ccae9a9f0bfe84828">DestroyIndex</a> (<a class="el" href="_movie_index_8h.html#a02f569684caa17e45531c85d80387b68">Index</a> index)</td></tr>
<tr class="separator:a8ee61f9e528ad88ccae9a9f0bfe84828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac70e320be0373ebb854072ddd33e42e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_movie_index_8h.html#a02f569684caa17e45531c85d80387b68">Index</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_movie_index_8c.html#ac70e320be0373ebb854072ddd33e42e8">CreateIndex</a> ()</td></tr>
<tr class="separator:ac70e320be0373ebb854072ddd33e42e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5aabf14cd8809083c6084a6220487a8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aabf14cd8809083c6084a6220487a8f">&#9670;&nbsp;</a></span>AddMovieTitleToIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AddMovieTitleToIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_movie_index_8h.html#a02f569684caa17e45531c85d80387b68">Index</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_movie_8h.html#a6f5eab8e6c6f61358bdf8722920c3e24">Movie</a> *&#160;</td>
          <td class="paramname"><em>movie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>docId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If this Index is indexing by movie title rather than one of the fields covered in AddMovieToIndex, use this function to iterate through all words in the title and add them to the index.</p>
<p>INPUT: index: the index to add the movie to. movie: a Movie to be added to the index.</p>
<dl class="section return"><dt>Returns</dt><dd>0 if successful. </dd></dl>

</div>
</div>
<a id="acc37901ef1ea26ad29447880d3c0268f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc37901ef1ea26ad29447880d3c0268f">&#9670;&nbsp;</a></span>AddMovieToIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AddMovieToIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_movie_index_8h.html#a02f569684caa17e45531c85d80387b68">Index</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_movie_8h.html#a6f5eab8e6c6f61358bdf8722920c3e24">Movie</a> *&#160;</td>
          <td class="paramname"><em>movie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="_movie_8h.html#af14e8439d4902c753ec446ee28f66a25">IndexField</a>&#160;</td>
          <td class="paramname"><em>field</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Indexes a given movie. Does not use to movie struct for anything other than extracting out the information; the movie is safe to free after calling this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>the index to add the movie to. </td></tr>
    <tr><td class="paramname">movie</td><td>a Movie to be added to the index. </td></tr>
    <tr><td class="paramname">field</td><td>which Movie field to index on.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful. </dd></dl>

</div>
</div>
<a id="a48f7f04f4093f138800055915d7a11f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48f7f04f4093f138800055915d7a11f7">&#9670;&nbsp;</a></span>ComputeKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t ComputeKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_movie_8h.html#a6f5eab8e6c6f61358bdf8722920c3e24">Movie</a> *&#160;</td>
          <td class="paramname"><em>movie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum&#160;</td>
          <td class="paramname"><em>IndexField</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Helper function to compute the key from a string, given a Movie and which field is to be used as the key.</p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t to be used as a key in the MovieIndex. </dd></dl>

</div>
</div>
<a id="ac70e320be0373ebb854072ddd33e42e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac70e320be0373ebb854072ddd33e42e8">&#9670;&nbsp;</a></span>CreateIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_movie_index_8h.html#a02f569684caa17e45531c85d80387b68">Index</a> CreateIndex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new Index. Allocates all the memory necessary for this index. </p>

</div>
</div>
<a id="a8ee61f9e528ad88ccae9a9f0bfe84828"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ee61f9e528ad88ccae9a9f0bfe84828">&#9670;&nbsp;</a></span>DestroyIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DestroyIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_movie_index_8h.html#a02f569684caa17e45531c85d80387b68">Index</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroys the supplied index, freeing up all resources used by this index. </p>

</div>
</div>
<a id="aed819996319a92b1fff299a664654bdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed819996319a92b1fff299a664654bdb">&#9670;&nbsp;</a></span>DestroyMovieSetWrapper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DestroyMovieSetWrapper </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>movie_set</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4a6dc77741a7bd254ce1f3b76a527f4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a6dc77741a7bd254ce1f3b76a527f4d">&#9670;&nbsp;</a></span>GetMovieSet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_movie_set_8h.html#ac804470e62a37f295817f4964b4cf666">MovieSet</a> GetMovieSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_movie_index_8h.html#a02f569684caa17e45531c85d80387b68">Index</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>term</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets a MovieSet for a given word from the supplied index.</p>
<p>INPUT: index: the index to search term: the term to search for in the index.</p>
<dl class="section return"><dt>Returns</dt><dd>A MovieSet. Returns NULL if the term is not in the index. (that is, there are no movies with the given word in the title) </dd></dl>

</div>
</div>
<a id="a675879515a8f5ab251c275e4cfaeb9d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a675879515a8f5ab251c275e4cfaeb9d6">&#9670;&nbsp;</a></span>toLower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void toLower </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
